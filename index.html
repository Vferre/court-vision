<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Court Vision</title>
  <meta name="description" content="Basketball 5x5 play diagrams in your browser. Scroll, learn when to run them, and export to SVG/PNG instantly." />
  <style>
    :root {
      --bg: #0b0d10;
      --card: #12161c;
      --ink: #e9eef5;
      --muted: #a8b2c1;
      --accent: #ffb703;
      --court: #f6b45b;
      --court-lines: #2b2f36;
      --offense: #e63946;
      --defense: #1b1b1b;
      --arrow: #4a90e2;
      --radius: 14px;
      --shadow: 0 6px 20px rgba(0,0,0,.35);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      background: radial-gradient(90vw 90vh at 20% -10%, #151a21, #0b0d10);
      color: var(--ink);
    }
    header {
      position: sticky; top: 0; z-index: 5;
      backdrop-filter: blur(10px);
      background: rgba(11,13,16,.6);
      border-bottom: 1px solid rgba(255,255,255,.06);
    }
    .wrap { max-width: 1200px; margin: 0 auto; padding: 18px 16px; }
    h1 { margin: 6px 0 10px; font-size: 20px; letter-spacing: .3px; }
    .sub { color: var(--muted); font-size: 14px; margin-bottom: 12px; }
    .controls {
      display: grid; grid-template-columns: 1fr auto; gap: 10px; align-items: center;
    }
    input[type="search"] {
      width: 100%; padding: 12px 14px; border-radius: 10px; border: 1px solid rgba(255,255,255,.08);
      background: #0f141a; color: var(--ink); outline: none;
    }
    .pill {
      font-size: 13px; padding: 8px 12px; border-radius: 999px;
      border: 1px solid rgba(255,255,255,.1); color: var(--muted);
      background: #0f141a;
    }
    main { padding: 22px 16px 50px; }
    .grid {
      max-width: 1200px; margin: 0 auto;
      display: grid; gap: 16px;
      grid-template-columns: repeat(auto-fill, minmax(310px, 1fr));
    }
    .card {
      background: linear-gradient(180deg, #141922, #10151b);
      border: 1px solid rgba(255,255,255,.06);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
      display: flex; flex-direction: column;
    }
    .card-head {
      padding: 14px 14px 10px;
      display: flex; align-items: center; justify-content: space-between;
      border-bottom: 1px dashed rgba(255,255,255,.06);
    }
    .title { font-weight: 700; font-size: 16px; }
    .badge { font-size: 12px; color: #0b0d10; background: var(--accent); padding: 4px 8px; border-radius: 999px; }
    .svg-wrap { padding: 10px 10px 0 10px; }
    .meta {
      padding: 10px 14px 14px;
      display: grid; gap: 6px; color: var(--muted); font-size: 13px;
    }
    .meta strong { color: var(--ink); font-weight: 600; }
    .options { margin-top: 4px; }
    .options li { margin-left: 18px; }
    .actions {
      padding: 10px 14px 14px; display: flex; gap: 8px; flex-wrap: wrap;
      border-top: 1px dashed rgba(255,255,255,.06);
    }
    button {
      appearance: none; border: 1px solid rgba(255,255,255,.12); background: transparent;
      color: var(--ink); padding: 8px 10px; border-radius: 10px; cursor: pointer; font-size: 13px;
    }
    button:hover { border-color: rgba(255,255,255,.3); }
    .empty { color: var(--muted); text-align: center; padding: 30px; }
    footer { color: var(--muted); text-align: center; padding: 24px; font-size: 12px; opacity: .8; }
    @media (min-width: 1100px) {
      h1 { font-size: 22px; }
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <h1>üèÄ Court Vision</h1>
      <div class="sub">Scroll the library. Click a card to download the diagram. No login, just hoops.</div>
      <div class="controls">
        <input id="search" type="search" placeholder="Search plays, goals, situations‚Ä¶" />
        <div class="pill" id="count">0 plays</div>
      </div>
    </div>
  </header>

  <main>
    <div class="grid" id="grid"></div>
    <div class="empty" id="empty" hidden>Nothing matches your search.</div>
  </main>

  <footer>
    Built with ‚ù§Ô∏è for coaches & hoopers. Add more plays inside <code>playsData</code>.
  </footer>

<script>
const playsData = [
  {
    id: "horns-1",
    name: "Horns (High Double Screens)",
    goal: "Quick advantage via high pick-and-roll or elbow touch",
    useWhen: "Good after dead balls vs man defense",
    avoidWhen: "If defense traps high and bigs can‚Äôt screen well",
    options: ["PNR into roll/pop", "Elbow entry DHO", "Reject screen baseline"],
    offense: [ {x:10,y:80,label:"1"}, {x:35,y:25,label:"4"}, {x:65,y:25,label:"5"}, {x:20,y:55,label:"2"}, {x:80,y:55,label:"3"} ],
    defense: [ {x:12,y:78}, {x:35,y:45}, {x:65,y:45}, {x:25,y:70}, {x:75,y:70} ],
    arrows: [ {from:{x:10,y:80}, to:{x:50,y:50}}, {from:{x:35,y:25}, to:{x:45,y:40}}, {from:{x:65,y:25}, to:{x:55,y:40}} ],
    tag: "man half-court"
  },
  {
    id: "flex-1",
    name: "Flex (Baseline Screen Series)",
    goal: "Layups or seals from cross-screens",
    useWhen: "Disciplined cutters vs man defense",
    avoidWhen: "Switch-heavy defenses",
    options: ["Flex cut", "Downscreen top", "Slip vs switch"],
    offense: [ {x:15,y:65,label:"1"},{x:30,y:80,label:"2"},{x:80,y:65,label:"3"},{x:25,y:40,label:"4"},{x:70,y:40,label:"5"} ],
    defense: [ {x:18,y:63},{x:29,y:70},{x:78,y:62},{x:28,y:50},{x:70,y:50} ],
    arrows: [ {from:{x:80,y:65}, to:{x:30,y:65}}, {from:{x:30,y:80}, to:{x:35,y:50}} ],
    tag: "man motion"
  }
];

const grid = document.getElementById('grid');
const searchEl = document.getElementById('search');
const countEl = document.getElementById('count');
const emptyEl = document.getElementById('empty');

function pct(v){ return v + '%'; }
function toXY(px,py,W,H){ const PAD=12; const innerW=W-2*PAD, innerH=H-2*PAD; return { x: PAD+innerW*(px/100), y: PAD+innerH*(py/100) }; }

function render(){
  grid.innerHTML='';
  const q=(searchEl.value||'').toLowerCase();
  const filtered=playsData.filter(p=>[p.name,p.goal,p.useWhen,p.avoidWhen,(p.options||[]).join(' '),p.tag].join(' ').toLowerCase().includes(q));
  filtered.forEach(p=>grid.appendChild(renderCard(p)));
  countEl.textContent=`${filtered.length} play${filtered.length===1?'':'s'}`;
  emptyEl.hidden=filtered.length>0;
}

function renderCard(play){
  const card=document.createElement('article'); card.className='card';
  const head=document.createElement('div'); head.className='card-head';
  head.innerHTML=`<div class="title">${play.name}</div><span class="badge">${play.tag||'play'}</span>`;
  card.appendChild(head);

  const svgWrap=document.createElement('div'); svgWrap.className='svg-wrap';
  const svg=buildCourt(play); svgWrap.appendChild(svg); card.appendChild(svgWrap);

  const meta=document.createElement('div'); meta.className='meta';
  meta.innerHTML=`<div><strong>Goal:</strong> ${play.goal}</div>
  <div><strong>Use when:</strong> ${play.useWhen}</div>
  <div><strong>Avoid when:</strong> ${play.avoidWhen}</div>
  <div class="options"><strong>Options:</strong><ul>${play.options.map(o=>`<li>${o}</li>`).join('')}</ul></div>`;
  card.appendChild(meta);

  const actions=document.createElement('div'); actions.className='actions';
  const btnSvg=document.createElement('button'); btnSvg.textContent='Download SVG';
  btnSvg.onclick=()=>downloadSVG(svg,`${play.id}.svg`);
  const btnPng=document.createElement('button'); btnPng.textContent='Download PNG';
  btnPng.onclick=()=>downloadPNG(svg,`${play.id}.png`);
  actions.appendChild(btnSvg); actions.appendChild(btnPng);
  card.appendChild(actions);

  return card;
}

function buildCourt(play){
  const W=360,H=240,PAD=12;
  const svg=document.createElementNS('http://www.w3.org/2000/svg','svg');
  svg.setAttribute('viewBox',`0 0 ${W} ${H}`); svg.setAttribute('width','100%'); svg.setAttribute('height','220');
  const rect=(x,y,w,h,r=0,fill='none',stroke='none',sw=1)=>{const el=document.createElementNS('http://www.w3.org/2000/svg','rect');el.setAttribute('x',x);el.setAttribute('y',y);el.setAttribute('width',w);el.setAttribute('height',h);if(r)el.setAttribute('rx',r);el.setAttribute('fill',fill);el.setAttribute('stroke',stroke);el.setAttribute('stroke-width',sw);return el;};
  const line=(x1,y1,x2,y2,stroke='black',sw=1)=>{const el=document.createElementNS('http://www.w3.org/2000/svg','line');el.setAttribute('x1',x1);el.setAttribute('y1',y1);el.setAttribute('x2',x2);el.setAttribute('y2',y2);el.setAttribute('stroke',stroke);el.setAttribute('stroke-width',sw);el.setAttribute('stroke-linecap','round');return el;};
  const circle=(cx,cy,r,fill='none',stroke='none',sw=1)=>{const el=document.createElementNS('http://www.w3.org/2000/svg','circle');el.setAttribute('cx',cx);el.setAttribute('cy',cy);el.setAttribute('r',r);el.setAttribute('fill',fill);el.setAttribute('stroke',stroke);el.setAttribute('stroke-width',sw);return el;};
  const text=(x,y,str)=>{const el=document.createElementNS('http://www.w3.org/2000/svg','text');el.setAttribute('x',x);el.setAttribute('y',y);el.setAttribute('text-anchor','middle');el.setAttribute('font-size','10');el.setAttribute('fill','var(--ink)');el.textContent=str;return el;};
  const arrow=(x1,y1,x2,y2)=>{const g=document.createElementNS('http://www.w3.org/2000/svg','g');const shaft=line(x1,y1,x2,y2,'var(--arrow)',2.2);g.appendChild(shaft);const ang=Math.atan2(y2-y1,x2-x1);const hl=8;const hx1=x2-hl*Math.cos(ang-Math.PI/6),hy1=y2-hl*Math.sin(ang-Math.PI/6),hx2=x2-hl*Math.cos(ang+Math.PI/6),hy2=y2-hl*Math.sin(ang+Math.PI/6);g.appendChild(line(x2,y2,hx1,hy1,'var(--arrow)',2.2));g.appendChild(line(x2,y2,hx2,hy2,'var(--arrow)',2.2));return g;};

  svg.appendChild(rect(0,0,W,H,10,'var(--court)','none'));
  svg.appendChild(rect(PAD,PAD,W-2*PAD,H-2*PAD,10,'none','var(--court-lines)',2));
  svg.appendChild(line(W/2,PAD,W/2,H-PAD,'var(--court-lines)',1.5));
  svg.appendChild(circle(W/2,H/2,18,'none','var(--court-lines)',1.5));
  const keyW=120,keyH=100; svg.appendChild(rect(W/2-keyW/2,PAD,keyW,keyH,8,'rgba(0,0,0,.04)','var(--court-lines)',1.2));
  svg.appendChild(circle(W/2,PAD+28,6,'none','var(--court-lines)',1.2));
  svg.appendChild(line(W/2-18,PAD+28,W/2+18,PAD+28,'var(--court-lines)',1.2));
  (play.defense||[]).forEach(p=>{const {x,y}=toXY(p.x,p.y,W,H);svg.appendChild(circle(x,y,6,'var(--defense)','var(--defense)'));});
  (play.offense||[]).forEach(p=>{const {x,y}=toXY(p.x,p.y,W,H);svg.appendChild(circle(x,y,6,'var(--offense)','white',1.1));if(p.label){svg.appendChild(text(x,y-10,p.label));}});
  (play.arrows||[]).forEach(a=>{const f=toXY(a.from.x,a.from.y,W,H);const t=toXY(a.to.x,a.to.y,W,H);svg.appendChild(arrow(f.x,f.y,t.x,t.y));});
  return svg;
}

function svgToString(svg){
  const clone=svg.cloneNode(true);
  const style=document.createElement('style'); style.textContent=`:root { --court:#f6b45b; --court-lines:#2b2f36; --offense:#e63946; --defense:#1b1b1b; --arrow:#4a90e2; --ink:#e9eef5; } text { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial; }`;
  clone.insertBefore(style,clone.firstChild);
  const xml=new XMLSerializer().serializeToString(clone);
  return `<?xml version="1.0" encoding="UTF-8"?>\n`+xml;
}
function downloadSVG(svg,filename){
  const str=svgToString(svg); const blob=new Blob([str],{type:'image/svg+xml'}); const url=URL.createObjectURL(blob);
  triggerDownload(url,filename); setTimeout(()=>URL.revokeObjectURL(url),1500);
}
function downloadPNG(svg,filename){
  const str=svgToString(svg); const img=new Image(); const svgBlob=new Blob([str],{type:'image/svg+xml'}); const url=URL.createObjectURL(svgBlob);
  img.onload=function(){const w=svg.viewBox.baseVal.width||360,h=svg.viewBox.baseVal.height||240;const c=document.createElement('canvas');c.width=w*3;c.height=h*3;const ctx=c.getContext('2d');ctx.fillStyle='#f6b45b';ctx.fillRect(0,0,c.width,c.height);ctx.drawImage(img,0,0,c.width,c.height);URL.revokeObjectURL(url);c.toBlob(b=>{const pngUrl=URL.createObjectURL(b);triggerDownload(pngUrl,filename);setTimeout(()=>URL.revokeObjectURL(pngUrl),1500);},'image/png');};
  img.src=url;
}
function triggerDownload(url,filename){const a=document.createElement('a');a.href=url;a.download=filename;document.body.appendChild(a);a.click();a.remove();}

searchEl.addEventListener('input',render);
render();
</script>
</body>
</html>
